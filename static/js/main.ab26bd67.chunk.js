(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(45)},23:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(16),c=n.n(s),l=(n(23),n(2)),o=n(3),i=n(5),u=n(4),h=n(7),m=n(6),p=n(9),g=(n(43),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"filterProgram",value:function(e){return e.filter(function(e){var t=new Date,n=new Date(e.start),a=new Date(e.start);return a.setSeconds(n.getSeconds()+parseInt(e.duration)),a>=t})}},{key:"formatTime",value:function(e){var t=new Date(e),n=t.getHours(),a=t.getMinutes();return n<10&&(n="0"+n),a<10&&(a="0"+a),n+":"+a}},{key:"dateClass",value:function(e,t){var n=new Date,a=new Date(e),r=new Date(e);r.setSeconds(a.getSeconds()+parseInt(t));var s="";a<=n&&(s=r-n<(r-a)/100*f?"list-group-item-danger":"list-group-item-success");return s}},{key:"render",value:function(){var e=this,t=this.props.channels[this.props.channelIndex],n=void 0!==this.props.channelIndex?v+t.logo:"",a=0===this.props.program.length?"\u041d\u0435\u0442 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b":"",s=this.filterProgram(this.props.program);return r.a.createElement("div",{className:"pt-2 pb-2"},r.a.createElement("div",null,r.a.createElement("img",{src:n,alt:"No logo"})),r.a.createElement("div",{className:"p-2"},a),r.a.createElement("ul",{className:"list-group"},s.map(function(t,n){var a="list-group-item "+e.dateClass(t.start,t.duration);return r.a.createElement("li",{key:n,className:a},e.formatTime(t.start)," ",t.title)})))}}]),t}(a.Component)),d=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pt-2"},r.a.createElement("div",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u043d\u0430\u043b:"),r.a.createElement("select",{id:"channel",className:"custom-select w-auto",value:this.props.currentChannelIndex,onChange:this.props.onChange},this.props.channels.map(function(e,t){return r.a.createElement("option",{key:e.chid,value:t}," ",e.title," ")})))}}]),t}(a.Component),v="https://epg.domru.ru",f=20,b=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(i.a)(this,Object(u.a)(t).call(this,e))).selectChannel=n.selectChannel.bind(Object(h.a)(n)),n.getChannels=n.getChannels.bind(Object(h.a)(n)),n.getProgram=n.getProgram.bind(Object(h.a)(n)),n.state={channels:[],currentChannelIndex:void 0,channelProgram:[]},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){this.getChannels()}},{key:"getChannels",value:function(){var e=this;p.get(v+"/channel/list?domain=perm").then(function(t){e.setState({channels:t.data,currentChannelIndex:0});var n=e.state.channels[0].xvid;e.getProgram(n)}).catch(function(e){alert("Error while get list of channels!")})}},{key:"getProgram",value:function(e){var t=this,n=new Date,a=new Date;n=n.toISOString().substr(0,10),a=new Date(a.setDate(a.getDate()+1)).toISOString().substr(0,10);var r="{0}/program/list?date_from={1}+00:00:00&date_to={2}+00:00:00&domain=perm&xvid[0]={3}".format(v,n,a,e);p.get(r).then(function(n){t.setState({channelProgram:n.data[e]||[]})}).catch(function(e){t.setState({channelProgram:[]}),alert("Error while get list of program for the channel!")})}},{key:"selectChannel",value:function(e){var t=e.target.value;this.setState({currentChannelIndex:t});var n=this.state.channels[t].xvid;this.getProgram(n)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container pt-2 pb-2"},r.a.createElement("h2",{className:"h2"},"TV-\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 dom.ru"),r.a.createElement("div",{className:""},r.a.createElement(d,{onChange:this.selectChannel,channels:this.state.channels})),r.a.createElement(g,{channels:this.state.channels,channelIndex:this.state.currentChannelIndex,program:this.state.channelProgram}))}}]),t}(a.Component);String.prototype.format=function(){var e=this;for(var t in arguments)e=e.replace("{"+t+"}",arguments[t]);return e};n(44);c.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.ab26bd67.chunk.js.map